# vim编译器

---

[toc]

使用vim打开某个文件（如果没有该文件就创建,创建在内存中只有保存后才会在目录中出现）

vim [option] file

## 模式

* 命令模式：可以移动光标，粘贴、复制文本，进入文件后默认的模式
* 插入模式或者编辑模式：可以修改文本
* 末行模式或扩展命令模式：保存、退出等
* 可以使用esc退出当前模式
![模式示意图](/pocket/img/12.png "模式示意图")

### 模式切换

* 命令模式-->插入模式
  * 在光标所在处切换模式 i
  * 在光标所在的行的行首切换模式 I
  * 在光标所在处后切换模式 a
  * 在光标所在的行的行尾切换模式 A
  * 在光标所在行下新开一行切换模式 o
  * 在光标所在行上新开一行切换模式 O
* 插入模式-->命令模式
  * esc
* 命令模式-->末行模式
  * `:`
* 末行模式-->命令模式
  * `esc` `esc`
  * `esc` `enter`

## 打开文件

* 文件 #打开文件并直接定位到#行 +#
* 打开文件，并直接定位到第一个匹配到关键字的地方 +/关键字
* 以二进制打开文件 -b
* 对比/同时打开多个文件 -d 文件1 文件2
* 以只读方式打开文件 -m
* 直接以末行模式打开 -e

## 关闭文件

* 末行模式
  * 保存 :w
  * 退出 :q
  * 保存并退出 :wq
  * 强制保存并退出 :wq!
  * 保存并退出 :x
* 命令模式
  * 保存退出 ZZ
  * 不保存退出 ZQ

## 末行模式

* 读入文件 r 文件
* 另存为 w 新文件
* 直接执行shell命令 !命令
* 直接把命令的结果写入文件 r!命令

### 命令模式跳转

* 字符之间跳转
  * 向右 l
  * 向左 h
  * 向下 j
  * 向上 k
  * 向后#个字符 #空格
* 单词间跳转
  * 下一个单词词首 w
  * 当前单词的词尾或下一个单词词尾 e
  * 当前单词的词首或上一个单词的词首 b
  * 向下跳转#个单词 #w
* 行间跳转
  * 跳转到#行 :#
  * 跳转到#行 #G
  * 直接跳转到最后一行 G
  * 跳转到第一行 gg
  * 跳转到第一行 1G
* 段落间跳转(空行间隔为分段)
  * 上一段 {
  * 下一段 }
* 翻屏
  * 向下翻一屏 ctrl+f
  * 向上翻一屏 ctrl+b
  * 向下翻半屏 ctrl+d
  * 向上翻半屏 ctrl+u

### 命令模式编辑

* 字符编辑
  * 删除光标所在的字符 x
  * 删除#个字符 #x
  * 将光标处的字符和后面的字符互换位置 xp
  * 将光标位置字符大小写互换 ～
  * 删除当前行的换行符号 J
* 替换
  * 替换当前光标所在处的字符(替换一个字符) r
  * 进入替换模式 R
* 删除
  * 删除,与光标跳转结合 d
  * 删除到行尾，并删除光标位置的字符 d$
  * 删除到行首，并不删除光标位置的字符 d0
  * 删除到行首非空字符 d^
  * 删除当前光标到下一个空格包括空格 dw
  * 删除当前光标到下一个空格，不包括空格 de
  * 删除当前光标到上一个空格，不包括空格 db
  * 删除整行 dd
  * 删除#行 #dd
  * 删除到结尾 dG
  * 删除到开头 dgg
  * D 相当与 d$
* 复制
  * 复制，与光标跳转结合 y
  * 复制整行 yy
  * 复制到结尾 yG
  * 复制到开头 ygg
  * Y相当与yy
* 粘贴
  * 如果是整行，则粘贴到当前光标所在的下一行，否则粘贴到光标后 p
  * 果是整行，则粘贴到当前光标所在的上一行，否则粘贴到光标前 P
  * 粘贴多次 #[i|I|a|A|o|O]字符串+`esc`
* 搜索
  * 向下查找光标单词 \*
  * 向上查找光标单词 \#
  * 从当前光标往下搜索 /关键字
  * 从当前光标向上搜索 ？关键字
  * 相同命名的相同方向 n
  * 相同命令的相反方向 N
* 撤销
  * 撤销最近的修改 u
  * 撤销最近的第#次修改 #u
  * 重复之前的操作 ctrl+r
  * 重复之前的操作 `.`
  * 重复#次之前的操作 `#.`
* 可视化
  * 面向字符 v
  * 面向行 V或者`shift+v`
  * 面向快 ctrl+v
  * 可以结合跳转使用
  * 对突出部分可以使用删除、复制、过滤、替换、另存为等操作

## 命令扩展模式

* 地址定界(对后面命令确认范围)
  * :开始,结束
  * 第#行到#+n行 ：#,+n
  * 最后一行 $
  * 到数#行 $-#
  * 全文 %
  * 关键字匹配 ：/关键字1/，/关键字2/
  * 后面可以接命令
    * 删除 d
    * 复制 y
    * 另存为文件 w 文件名
    * 读取其他文件内容写道匹配的下一行 r 文件
* 查找并替换
  * 使用地址界定来进行查找
  * `：%s/关键字/要替换字符/装饰器`
  * 关键字可以使用正则
  * 替换内容中可以使用`&`来代表匹配内容
  * 装饰器
  * 忽略大小写 i
  * 替换全部 g
  * 每次替换进行询问 gc
  * 分隔符
    * /
    * @
    * \#
* 居中
  * 光标行居中 ce
  * 光标行靠右 ri
  * 光标行靠左 le

## 多文件操作

* 打开多个文件 vim 文件1 文件2
* 下一个文件 ：next
* 上一个文件 ：prev
* 第一个文件 ：first
* 最后一个文件 ：last
* 全部退出 ：qall
* 保存全部 ：wall
* 保存并退出全部 ：wqall
* 保存并退出全部 ：xall
* 水平分割同时显示多个文件 -o
* 垂直分割同时显示多个文件 -O
  * 在同时显示的窗口中切换光标 ctrl+w 上|下|左|右
  * 添加新同屏窗口
    * 水平添加 strl+w s
    * 垂直添加 strl+w v
    * 取消邻近窗口 strl+w q
    * 取消全部窗口 strl+w o

## 工作特性

* 全局有效 /etc/vimrc
* 对当前用户有效 ～/.vimrc
* 设置行号 set nu 取消 set nonu
* 搜索忽略大小写 set ic 取消 set noic
* 自动缩进 set ai 取消 set noai
* 设置搜索匹配内容高亮显示 set his 取消 set nohis
* 设置语法高亮 syntax on 取消 syntax off
* 文件格式
  * windows格式 set fileformat=dos
  * unix格式 set fileformat=unix
* 添加标识线 set cul 取消 set nocul
* 获取帮助 set all
* 获取帮助 ：help|：help|vimtutor
* 未保存使用`.swp`、`.swn`、`.swm`文件恢复文件 vim -r 文件
* 加密文件(下次打开需要输入密码) vim -x 文件    #创建文件时才可以设置密码
